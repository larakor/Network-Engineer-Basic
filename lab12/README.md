
![image](https://github.com/user-attachments/assets/ea483d81-2287-4bd8-9fa5-71671b63cb7e)

![image](https://github.com/user-attachments/assets/944fa246-ed93-4b15-a2c9-6b26f2f48126)

**ВЫПОЛНЕНИЕ**

**Часть 1. Создание сети и настройка основных параметров устройства**

**Шаг 1. Подключите кабели сети согласно приведенной топологии.**

![image](https://github.com/user-attachments/assets/0a81172d-7d8d-44a0-a420-76cfca9ccf91)

**Шаг 2. Произведите базовую настройку маршрутизаторов.**

a.	Назначьте маршрутизатору имя устройства.

b.	Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.

c.	Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.

d.	Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.

e.	Назначьте cisco в качестве пароля VTY и включите вход в систему по паролю.

f.	Зашифруйте открытые пароли.

g.	Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.

h.	Настройте IP-адресации интерфейса, как указано в таблице выше.

i.	Настройте маршрут по умолчанию. от R2 до  R1.

j.	Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![image](https://github.com/user-attachments/assets/db1222b3-b6ae-4f6d-9ee3-7bd989def2c6)

![image](https://github.com/user-attachments/assets/36a4196c-6574-474b-8581-a045ccc7b418)

**Шаг 3. Настройте базовые параметры каждого коммутатора.**

a.	Присвойте коммутатору имя устройства.

b.	Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.

c.	Назначьте class в качестве зашифрованного пароля привилегированного режима EXEC.

d.	Назначьте cisco в качестве пароля консоли и включите вход в систему по паролю.

e.	Назначьте cisco в качестве пароля VTY и включите вход в систему по паролю.

f.	Зашифруйте открытые пароли.

g.	Создайте баннер с предупреждением о запрете несанкционированного доступа к устройству.

h.	Выключите все интерфейсы, которые не будут использоваться.

i.	Настройте IP-адресации интерфейса, как указано в таблице выше.

j.	Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![image](https://github.com/user-attachments/assets/755d3637-4d50-4c04-9629-829ef5e0c1fe)

![image](https://github.com/user-attachments/assets/fb64f236-52b3-463c-b1d6-c6de725771e2)

![image](https://github.com/user-attachments/assets/eae77027-4ebc-4ffa-bd5b-e867f9aa3ca7)

Коммутатор 2 - начальные настройки те же.

![image](https://github.com/user-attachments/assets/fc1524ab-a9d8-406c-8b71-6ad366198185)

![image](https://github.com/user-attachments/assets/1476f456-ecab-4bbc-8211-cfa6a1dabaa8)

**Часть 2. Настройка и проверка NAT для IPv4.**

**Шаг 1. Настройте NAT на R1, используя пул из трех адресов 209.165.200.226-209.165.200.228.**

a.	Настройте простой список доступа, который определяет, какие хосты будут разрешены для трансляции. В этом случае все устройства в локальной сети R1 имеют право на трансляцию.

b.	Создайте пул NAT и укажите ему имя и диапазон используемых адресов.

c.	Настройте перевод, связывая ACL и пул с процессом преобразования.

d.	Задайте внутренний (inside) интерфейс. 

e.	Определите внешний (outside) интерфейс.

![image](https://github.com/user-attachments/assets/9ba8ec02-366e-443b-a709-7ab43d0f54f9)

**Шаг 2. Проверьте и проверьте конфигурацию.**

a.	С PC-B,  запустите эхо-запрос интерфейса Lo1 (209.165.200.1) на R2. Если эхо-запрос не прошел, выполните процес поиска и устранения неполадок. 

![image](https://github.com/user-attachments/assets/83bd366b-7208-42e2-90a9-a2159091205c)

![image](https://github.com/user-attachments/assets/74d59700-78ee-4429-a05b-5f2396524362)

На R1 отобразите таблицу NAT на R1 с помощью команды show ip nat translations.    R1# show ip nat translations

![image](https://github.com/user-attachments/assets/9bec2367-1a5b-47e0-8abf-a46a275ab46b)

*Во что был транслирован внутренний локальный адрес PC-B?*  209.165.200.226

*Какой тип адреса NAT является переведенным адресом?* Inside

b.	С PC-A, запустите  эхо-запрос интерфейса Lo1 (209.165.200.1) на R2. Если эхо-запрос не прошел, выполните отладку. На R1 отобразите таблицу NAT на R1 с помощью команды show ip nat translations.

![image](https://github.com/user-attachments/assets/8ca78acf-4df5-4b07-b7e6-13a2ac8e34bf)

![image](https://github.com/user-attachments/assets/1a5bc56e-2e37-42a0-8f58-6d71581e0d72)

R1# show ip nat translations 

c.	Из S1, эхо-запрос интерфейса Lo1 (209.165.200.1) на R2. Если эхо-запрос не прошел, выполните отладку. На R1 отобразите таблицу NAT на R1 с помощью команды show ip nat translations.

![image](https://github.com/user-attachments/assets/c5824ec2-a166-4e7f-b2cd-f81f16d798d3)

d.	Теперь запускаем пинг R2 Lo1 из S2. Неудачно

![image](https://github.com/user-attachments/assets/1a1dd4e3-f3e2-49ba-b1ec-435ae5903d80)

e.	Это ожидаемый результат, потому что выделено только 3 адреса, и мы попытались ping Lo1 с четырех устройств. Учитывая, что пул ограничен тремя адресами, NAT для пула адресов недостаточно для нашего приложения.

Пробовала в разных комбинациях - все получается - 3 устройста проходят, 4му - отказ

f.	 Очистите преобразование NAT и статистику, и мы перейдем к PAT.

![image](https://github.com/user-attachments/assets/4b1ef2b2-3b4c-4bf2-9e57-7bea7908ef9e)

**Часть 3. Настройка и проверка PAT для IPv4.**

**Шаг 1. Удалите команду преобразования на R1.**

![image](https://github.com/user-attachments/assets/b7e79fcb-fcd1-4354-b191-6396b8cd9389)

**Шаг 2. Добавьте команду PAT на R1.**
Теперь настройте преобразование PAT в пул адресов (помните, что ACL и Pool уже настроены, так что это единственная команда, которую нам нужно изменить с NAT на PAT).

![image](https://github.com/user-attachments/assets/4972fe50-3c78-4ff6-a291-f81e6ee5fded)

**Шаг 3. Протестируйте и проверьте конфигурацию.**

a.	Давайте проверим, что PAT работает. С PC-B,  запустите эхо-запрос интерфейса Lo1 (209.165.200.1) на R2. Если эхо-запрос не прошел, выполните отладку. На R1 отобразите таблицу NAT на R1 с помощью команды show ip nat translations.

![image](https://github.com/user-attachments/assets/e74098f3-5168-43f9-94c0-2f0b2c2598c5)

![image](https://github.com/user-attachments/assets/12dcd130-dd45-4e0e-9030-14528f3ba146)

 b.	С PC-A, запустите эхо-запрос интерфейса Lo1 (209.165.200.1) на R2. Если эхо-запрос не прошел, выполните отладку. На R1 отобразите таблицу NAT на R1 с помощью команды show ip nat translations.

 ![image](https://github.com/user-attachments/assets/ee94c6fc-2ebb-499c-a994-1a68d8764f4f)

![image](https://github.com/user-attachments/assets/7566406f-86ec-48de-acc7-2c496db286cd)

c.	Генерирует трафик с нескольких устройств для наблюдения PAT. На PC-A и PC-B используйте параметр -t с командой ping, чтобы отправить безостановочный ping на интерфейс Lo1 R2 (ping -t 209.165.200.1), затем вернитесь к R1 и выполните команду show ip nat translations:

![image](https://github.com/user-attachments/assets/a03776eb-c148-4a69-80ae-24babfbc49ae)

 ![image](https://github.com/user-attachments/assets/190392bc-2c67-4b39-8ca8-0ccca1be76a8)

![image](https://github.com/user-attachments/assets/18329f54-f7e2-433f-9974-ce36ac8b8b7c)

d.	PAT в пул является очень эффективным решением для малых и средних организаций. Тем не менее есть неиспользуемые адреса IPv4, задействованные в этом сценарии. Мы перейдем к PAT с перегрузкой интерфейса, чтобы устранить эту трату IPv4 адресов. Остановите ping на PC-A и PC-B с помощью комбинации клавиш Control-C, затем очистите трансляции и статистику:

![image](https://github.com/user-attachments/assets/ab0ccf38-a527-4633-8768-173ed225b4a5)

**Шаг 4. На R1 удалите команды преобразования nat pool.**

**Шаг 5. Добавьте команду PAT overload, указав внешний интерфейс.**

![image](https://github.com/user-attachments/assets/52e1d29e-d163-442d-82eb-0f6874d7443e)

**Шаг 6. Протестируйте и проверьте конфигурацию.**

a.	Давайте проверим PAT, чтобы интерфейс работал. С PC-B,  запустите эхо-запрос интерфейса Lo1 (209.165.200.1) на R2. Если эхо-запрос не прошел, выполните отладку. На R1 отобразите таблицу NAT на R1 с помощью команды show ip nat translations.

![image](https://github.com/user-attachments/assets/2bda054f-fd5c-458c-b8df-6a29c44d08da)

![image](https://github.com/user-attachments/assets/32c8f1b9-de80-47ee-96d7-65481cd8d2c4)

b.	Сделайте трафик с нескольких устройств для наблюдения PAT. На PC-A и PC-B используйте параметр -t с командой ping для отправки безостановочного ping на интерфейс Lo1 R2 (ping -t 209.165.200.1). На S1 и S2 выполните привилегированную команду exec ping 209.165.200.1 повторить 2000.*(не работает)* Затем вернитесь к R1 и выполните команду show ip nat translations.

![image](https://github.com/user-attachments/assets/1f628ffb-80e9-404b-bb2d-bf55b3f31c62)

Теперь все внутренние глобальные адреса сопоставляются с IP-адресом интерфейса g0/0/0.

**Часть 4. Настройка и проверка статического NAT для IPv4.**

**Шаг 1. На R1 очистите текущие трансляции и статистику.**

R1# clear ip nat translations * 
R1# clear ip nat statistics 

**Шаг 2. На R1 настройте команду NAT, необходимую для статического сопоставления внутреннего адреса с внешним адресом.**
Для этого шага настройте статическое сопоставление между 192.168.1.11 и 209.165.200.1 с помощью следующей команды:
R1(config)# ip nat inside source static 192.168.1.2 209.165.200.229 

**Шаг 3. Протестируйте и проверьте конфигурацию.**

a.	Давайте проверим, что статический NAT работает. На R1 отобразите таблицу NAT на R1 с помощью команды show ip nat translations, и вы увидите статическое сопоставление.
R1# show ip nat translations
Pro Inside global Inside local Outside local Outside global
--- 209.165.200.229 192.168.1.2 --- ---
Total number of translations: 1

b.	Таблица перевода показывает, что статическое преобразование действует. Проверьте это, запустив ping  с R2 на 209.165.200.229. Плинги должны работать.
Примечание. Возможно, вам придется отключить брандмауэр ПК для работы pings.

c.	На R1 отобразите таблицу NAT на R1 с помощью команды show ip nat translations, и вы увидите статическое сопоставление и преобразование на уровне порта для входящих pings.
R1# show ip nat translations
Pro Inside global Inside local Outside local Outside global
--- 209.165.200.229 192.168.1.2 --- ---
229:3 192.168.1. 2:3 209.165.200. 225:3 209.165.200. 225:3 209.165.200. 
Total number of translations: 2
Это подтверждает, что статический NAT работает.













